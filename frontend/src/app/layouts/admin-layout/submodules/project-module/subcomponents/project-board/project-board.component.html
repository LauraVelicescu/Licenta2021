<div class="content" style="width: 90%; margin: auto;">

  <div class="row">
    <mat-form-field style="width: 60%; margin: auto">
      <mat-select (openedChange)="openedChange($event)" placeholder="Select">
        {{getPrint(selectedProject)}}
        <div class="select-container">
          <mat-optgroup>
            <mat-form-field style="width:100%;">
              <input #search autocomplete="off" placeholder="Search" aria-label="Search" matInput
                     [formControl]="searchTextboxControl">
              <button [disableRipple]="true" *ngIf="search.value" matSuffix mat-icon-button aria-label="Clear"
                      (click)="clearSearch($event)">
                <mat-icon>close</mat-icon>
              </button>
            </mat-form-field>
          </mat-optgroup>
          <mat-optgroup *ngIf="(filteredOptions | async)?.length == 0">
            <div>No results found!</div>
          </mat-optgroup>
          <mat-option (onSelectionChange)="selectionChange($event)" *ngFor="let option of filteredOptions | async"
                      [value]="option">
            {{getPrint(option)}}
          </mat-option>
        </div>
      </mat-select>
    </mat-form-field>
  </div>
  <div *ngIf="selectedProject" style="margin-top: 25px">
    <div class="row" cdkDropListGroup>
      <div *ngFor="let status of displayedStatusColumns" class="col-md-3">
        <h2 style="text-align: right">{{getPrintableStatus(status)}}</h2>
        <div
          cdkDropList
          [cdkDropListData]="statusTaskMap.get(status)"
          class="example-list"
          (cdkDropListDropped)="changeStatus($event, status)">
          <button mat-icon-button class="example-icon favorite-icon" aria-label="Example icon-button with heart icon"
                  *ngIf="status==='TO_DO'">
            <mat-icon>add</mat-icon>
          </button>
          <div class="card example-box" *ngFor="let item of statusTaskMap.get(status)" cdkDrag [cdkDragData]="item">
            <div class="row">
              <div class="col-md-8">
                <h6>{{item.name}}</h6>
                <p>From: <span>{{formatDateLocal(item.createdDate)}}</span></p>
                <p>Due: <span>{{formatDateLocal(item.deadline)}}</span></p>
              </div>
              <div class="col-md-2" style="margin-top: 8%;">
                <div [innerHTML]="getUserLogo(item)" *ngIf="item.projectMember"></div>
                <div *ngIf="!item.projectMember">
                </div>
              </div>
              <div class="col-md-2">
                <div class="text-right">
                  <button type="button" rel="tooltip" class="btn btn-success btn-link btn-icon btn-sm"
                  >
                    <i class="tim-icons icon-settings"></i>
                  </button>
                  <button type="button" rel="tooltip" class="btn btn-danger btn-link btn-icon btn-sm"
                  >
                    <i class="tim-icons icon-simple-remove"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
